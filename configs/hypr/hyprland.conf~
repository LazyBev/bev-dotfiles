# #######################################################################################
# AUTOGENERATED HYPR CONFIG.
# PLEASE USE THE CONFIG PROVIDED IN THE GIT REPO /examples/hypr.conf AND EDIT IT,
# OR EDIT THIS ONE ACCORDING TO THE WIKI INSTRUCTIONS.
# #######################################################################################

#autogenerated = 1 # remove this line to remove the warning

# This is an example Hyprland config file.
# Refer to the wiki for more information.
# https://wiki.hyprland.org/Configuring/Configuring-Hyprland/

# Please note not all available settings / options are set here.
# For a full list, see the wiki
# You can split this configuration into multiple files
# Create your files separately and then link them to this file like this:
# source = ~/.config/hypr/myColors.conf


################
### MONITORS ###
################

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor=,preferred,auto,1,mirror,DP-1

###################
### MY PROGRAMS ###
###################

# --enable-features=UseOzonePlatform --ozone-platform=wayland use this flag to launch CEF/Electron apps in wayland

#################
### AUTOSTART ###
#################

# Autostart necessary processes (like notifications daemons, status bars, etc.)
# Or execute your favorite apps at launch like this:

exec-once = /usr/lib/polkit-kde-authentication-agent-1 #Polkit to manage passwords
exec-once = waybar &
exec-once = swww-daemon & # wallpaper
exec-once = swww img ~/Pictures/jodio.png
exec-once = wl-paste --type text --watch cliphist store # clipboard
exec-once = wl-paste --type image --watch cliphist store
exec-once = hypridle
exec-once = pipewire &
exec-once = pipewire-pulse &
exec-once = wireplumber &
exec-once = pypr &
exec-once = dunst &
exec-once = fcitx5 &
exec-once = dbus-update-activation-environment --all &
exec-once = nm-applet &
exec-once = hyprpaper &
exec-once = ags &
exec-once = ~/.config/hypr/scripts/resetxdgportal.sh
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = XDG_RUNTIME_DIR=/run/user/$(id -u)
exec-once = export $(dbus-launch)

#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hyprland.org/Configuring/Environment-variables/

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Firefox
env = MOZ_ENABLE_WAYLAND,1
#env = MOZ_DISABLE_RDD_SANDBOX,1

# Nvidia
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
#env = __GLX_VENDOR_LIBRARY_NAME,nvidia # remove if firefox crashes
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# QT
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_STYLE_OVERRIDE,kvantum

# Toolkit Backend Variables
env = GDK_BACKEND,wayland,x11,*
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = _JAVA_AWT_WM_NONREPARENTING,1

# XDG Specifications
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = OZONE_PLATFORM,wayland

#env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = GTK_THEME,Orchis-Purple-Dark

#####################
### LOOK AND FEEL ###
#####################

plugin {
    hyprbars {
        bar_height = 30
        bar_color = rgba(FDBDFFFF)
        bar_blur = true

        col.text = rgba(000000FF)
        bar_padding = 14
        bar_text_size = 14
        bar_text_font = UbuntuMono Nerd Font
        bar_text_align = left
        bar_part_of_window = true
        bar_precedence_over_border = true
        
        hyprbars-button = rgba(ff404000), 0
        hyprbars-button = rgba(eeee1100), 0  
    }
}

windowrulev2 = plugin:hyprbars:bar_color rgba(FDBDFFFF),focus:1
windowrulev2 = plugin:hyprbars:bar_color rgba(9D6D9FDD),focus:0

windowrulev2 = plugin:hyprbars:title_color rgba(000000FF),focus:1
windowrulev2 = plugin:hyprbars:title_color rgba(111111FF),focus:0

# Refer to https://wiki.hyprland.org/Configuring/Variables/

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 3
    col.active_border = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.inactive_border = rgba(565f89cc) rgba(9aa5cecc) 45deg
    layout = master
    resize_on_border = true
}

group {
    col.border_active = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.border_inactive = rgba(565f89cc) rgba(9aa5cecc) 45deg
    col.border_locked_active = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.border_locked_inactive = rgba(565f89cc) rgba(9aa5cecc) 45deg
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    blur {
        enabled = true
        size = 8
        passes = 3
        new_optimizations = true
    }
}


layerrule = animation slide, swaync-notification-window
layerrule = ignorealpha 0, swaync-notification-window
layerrule = blur, swaync-notification-window
layerrule = ignorealpha 0, swaync-control-center
layerrule = animation slide right, swaync-control-center
layerrule = blur, swaync-control-center
layerrule = animation popin, rofi
layerrule = ignorealpha 0, rofi
layerrule = dimaround, rofi
layerrule = blur, rofi
layerrule = animation slide down, waybar
layerrule = blur, waybar
layerrule = noanim, selection

animations {
    enabled = yes, please :)

    bezier = linear, 0, 0, 1, 1
    bezier = easeInCustom, 0.6, 0, 0.7, 0
    bezier = easeOutCustom, 0.3, 1, 0.4, 1
    bezier = easeOutBackCustom, 0.1, 1.2, 0.6, 1

    # i dont normally use this one, but its fun :3
    bezier = bounce, 0.80, 1.40, 0, 0.88

    animation = global, 1, 4, easeOutCustom
    
    animation = windows, 1, 5, easeOutBackCustom
        animation = windowsIn, 1, 5, easeOutBackCustom, popin 40%
        animation = windowsOut, 1, 5, easeOutCustom 
	
    animation = layersIn, 1, 3, easeOutCustom, fade
    animation = layersOut, 1, 2, easeInCustom, fade
        animation = fadeLayersIn, 1, 3.5, easeOutCustom 
        animation = fadeLayersOut, 1, 3.5, easeOutCustom 
    
    animation = border, 1, 4, easeOutCustom
    animation = fade, 1, 3, easeOutCustom 
        animation = fadeIn, 1, 3, easeOutCustom
        animation = fadeOut, 1, 3, easeOutCustom
     
    animation = workspaces, 1, 5, easeOutCustom, slidefade 50%
        animation = specialWorkspace, 1, 5, easeOutCustom, slidevert
        animation = specialWorkspaceOut, 1, 2.5, easeInCustom, slidevert
}

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true
    preserve_split = true
    split_bias = 2
}

# See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
master {
    new_status = slave
    mfact = 0.5
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    animate_manual_resizes = true
    disable_hyprland_logo = true
    disable_hyprland_qtutils_check = true
    disable_splash_rendering = true
    focus_on_activate = false
    vfr = 1 
    vrr = 1
    font_family = UbuntuMono Nerd Font 
}


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
input {
  kb_layout = gb # XKB layout
  follow_mouse = 1 
  sensitivity = 5 # -1.0 - 1.0, 0 means no modification.
  force_no_accel = 1
  # kb_model = cherryblue # XKB model
  # kb_variant = dvorak # XKB variant
  # numlock_by_default = false 
  # repeat_rate = 25
  # repeat_delay = 600
  # accel_profile = flat # flat, adaptive
  # natural_scroll = true
}

cursor {
  no_hardware_cursors = true
  inactive_timeout = 2
}

render {
    explicit_sync = true 
    explicit_sync_kms = false 
    direct_scanout = 0
}
# https://wiki.hyprland.org/Configuring/Variables/#gestures
gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

####################
### KEYBINDINGSS ###
####################

# /* ---- ✴️ Variables ✴️ ---- */  #
# Changed from SUPER to ALT to match Niri
$mainMod = ALT

# Default
$scriptsDir = $HOME/.config/hypr/scripts

# Window Management
bind = $mainMod, W, fullscreen, 1 # For Alt+W (maximize column in Niri)
bind = $mainMod, F, fullscreen, 0 # For Alt+F (fullscreen window in Niri)
bind = $mainMod, Q, killactive # Kill window (Alt+Q in Niri)

# Applications
bind = $mainMod, Return, exec, ghostty # Terminal (same as Niri)
bind = $mainMod, B, exec, floorp # Browser (equivalent to Niri's Alt+B)
bind = $mainMod, D, exec, fuzzel # App launcher (same as Niri)
bind = $mainMod, S, exec, steam # Steam (same as Niri)
bind = $mainMod, T, exec, dolphin # File manager (same as Niri)
bind = $mainMod, E, exec, emacs # Added for Emacs like Niri
bind = $mainMod, C, exec, emacs ~/.config/hypr/hyprland.conf # Config edit (like Niri's Alt+C)
bind = $mainMod, Y, exec, waypaper # Wallpaper (Alt+Y in Niri)
bind = $mainMod, A, exec, waypaper # Alternative wallpaper shortcut (Alt+A in Niri)
bind = SUPER SHIFT, X, exec, swaylock # Screen lock (like Niri's Mod+X)
bind = $mainMod SHIFT, P, exec, $scriptsDir/Wlogout.sh # Power menu (for shutdown/reboot like Niri)
bind = $mainMod CTRL, P, exec, reboot # Reboot (Alt+Ctrl+P in Niri)
bind = $mainMod, Z, exec, pypr magnify toggle

# Window Movement
# Move focus with mainMod + I/J/K/L (arrows) - matching Niri
bind = $mainMod, J, movefocus, l # left
bind = $mainMod, L, movefocus, r # right
bind = $mainMod, I, movefocus, u # up
bind = $mainMod, K, movefocus, d # down

# Move window with mainMod + Shift + I/J/K/L - matching Niri
bind = $mainMod SHIFT, J, movewindow, l # left
bind = $mainMod SHIFT, L, movewindow, r # right
bind = $mainMod SHIFT, I, movewindow, u # up
bind = $mainMod SHIFT, K, movewindow, d # down

# Resize window (matching Niri's style with Alt+Minus and Alt+Equal)
bind = $mainMod, MINUS, resizeactive, -10% 0
bind = $mainMod, EQUAL, resizeactive, 10% 0
bind = $mainMod SHIFT, MINUS, resizeactive, 0 -10%
bind = $mainMod SHIFT, EQUAL, resizeactive, 0 10%

# Window Toggle
bind = $mainMod, V, togglefloating # Toggle floating (Alt+V in Niri)
bind = $mainMod, Tab, cyclenext # Alt+Tab behavior (similar to Niri)

# Screenshot (matching Niri's bindings)
bind = $mainMod, X, exec, grimblast copy area # Screenshot area (Alt+X in Niri)
bind = $mainMod SHIFT, X, exec, grimblast save screen # Screenshot screen (Alt+Shift+X in Niri)
bind = $mainMod CTRL, X, exec, grimblast save active # Screenshot window (Alt+Ctrl+X in Niri)

# Workspace switching with Alt+[1-9] - matching Niri
bind = $mainMod, code:10, workspace, 1 # NOTE: code:10 = key 1
bind = $mainMod, code:11, workspace, 2 # NOTE: code:11 = key 2
bind = $mainMod, code:12, workspace, 3 # NOTE: code:12 = key 3
bind = $mainMod, code:13, workspace, 4 # NOTE: code:13 = key 4
bind = $mainMod, code:14, workspace, 5 # NOTE: code:14 = key 5
bind = $mainMod, code:15, workspace, 6 # NOTE: code:15 = key 6
bind = $mainMod, code:16, workspace, 7 # NOTE: code:16 = key 7
bind = $mainMod, code:17, workspace, 8 # NOTE: code:17 = key 8
bind = $mainMod, code:18, workspace, 9 # NOTE: code:18 = key 9

# Move window to workspace with mainMod + SHIFT + [1-9] - matching Niri
bind = $mainMod SHIFT, code:10, movetoworkspace, 1 # NOTE: code:10 = key 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2 # NOTE: code:11 = key 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3 # NOTE: code:12 = key 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4 # NOTE: code:13 = key 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5 # NOTE: code:14 = key 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6 # NOTE: code:15 = key 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7 # NOTE: code:16 = key 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8 # NOTE: code:17 = key 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9 # NOTE: code:18 = key 9

# Navigate workspaces up/down - similar to Niri's Alt+M/N
bind = $mainMod, M, workspace, e+1
bind = $mainMod, N, workspace, e-1

# Move window to next/prev workspace - similar to Niri's Alt+Shift+M/N
bind = $mainMod SHIFT, M, movetoworkspace, +1
bind = $mainMod SHIFT, N, movetoworkspace, -1

# Brackets - mapping to Niri's consume/expel window functions
bind = $mainMod, bracketleft, movetoworkspace, -1 
bind = $mainMod, bracketright, movetoworkspace, +1
bind = $mainMod, comma, togglegroup # Similar function to Niri's consume windows
bind = $mainMod, period, changegroupactive # Navigate grouped windows

# Power control - Alt+P to turn off monitors
bind = $mainMod, P, exec, hyprctl dispatch dpms off

# Media and volume controls (same as Niri, allowing when locked)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ 
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow # Move windows with ALT + left click
bindm = $mainMod, mouse:273, resizewindow # Resize windows with ALT + right click

# Mouse wheel for workspace switching (like Niri)
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Alt+Shift+Backspace to quit (like Niri)
bind = $mainMod SHIFT, Backspace, exit

##############################
### WINDOWS AND WORKSPACES ###
##############################

## Use hyprctl clients to look for window class

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Opacity 

# smart gaps
workspace = w[tv1], gapsout:2.5, gapsin:2.5
workspace = f[1], gapsout:2.5, gapsin:2.5
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

windowrulev2 = tile,class:^(vesktop)$
windowrulev2 = tile,class:^(firefox.*|zen)$
windowrulev2 = tile,class:^(.*)([Cc]ord)$
windowrulev2 = tile,class:^(steam)$,title:^(Steam)$
windowrulev2 = tile,class:^(Spotify|spotify)$
windowrulev2 = tile,class:^(obs|com.obsproject.Studio)$
windowrulev2 = float,class:^(com\.mitchellh\.ghostty)$

# steam floats
windowrulev2 = size 500 700,class:^(steam)$,title:^(Friends List)$
windowrulev2 = center 1,class:^(steam)$,title:^(Friends List)$
windowrulev2 = float,class:^(steam)$,title:^(.*)$
windowrulev2 = center 1, class:^()$,title:^(Steam)$
windowrulev2 = tile,class:^(steam)$,title:^(Steam)$

# other
windowrulev2 = float,class:^(pcmanfm)$
windowrulev2 = float,class:^(eog)$
windowrulev2 = float,class:^(Bitwarden)$
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(love)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Library)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Invalid Save Permissions)$
windowrulev2 = float,class:^(com\.mitchellh\.ghostty)$,title:^(btop++)$
windowrulev2 = tile,class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float,class:^(org.twosheds.iwgtk|iwgtk)$,title:^(.*)$

windowrulev2 = float,title:^(Open)$
windowrulev2 = float,title:^(Open File)$
windowrulev2 = float,title:^(Open Files)$
windowrulev2 = float,title:^(Choose Files)$
windowrulev2 = float,title:^(Save As)$
windowrulev2 = float,title:^(Confirm to replace files)$
windowrulev2 = float,title:^(File Operation Progress)$
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$

# tearing
windowrulev2 = immediate 1,fullscreen,class:^(.*)$
windowrulev2 = immediate 1,class:^(gamescope)$
# Hyprland Configuration File
# Cleaned and organized version

###################
### BASIC SETUP ###
###################

# Monitor configuration
monitor = ,preferred,auto,1,mirror,DP-1

#################
### AUTOSTART ###
#################

exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = waybar &
exec-once = swww-daemon & 
exec-once = swww img ~/Pictures/jodio.png
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = hypridle
exec-once = pipewire &
exec-once = pipewire-pulse &
exec-once = wireplumber &
exec-once = pypr &
exec-once = dunst &
exec-once = fcitx5 &
exec-once = dbus-update-activation-environment --all &
exec-once = nm-applet &
exec-once = hyprpaper &
exec-once = ags &
exec-once = ~/.config/hypr/scripts/resetxdgportal.sh
exec-once = XDG_RUNTIME_DIR=/run/user/$(id -u)
exec-once = export $(dbus-launch)

#############################
### ENVIRONMENT VARIABLES ###
#############################

# Cursor settings
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Firefox
env = MOZ_ENABLE_WAYLAND,1

# Nvidia settings
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# QT settings
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_STYLE_OVERRIDE,kvantum

# Toolkit backends
env = GDK_BACKEND,wayland,x11,*
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = _JAVA_AWT_WM_NONREPARENTING,1

# XDG specifications
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = OZONE_PLATFORM,wayland

# Theme
env = GTK_THEME,Orchis-Purple-Dark

#####################
### LOOK AND FEEL ###
#####################

# Plugin settings
plugin {
    hyprbars {
        bar_height = 30
        bar_color = rgba(FDBDFFFF)
        bar_blur = true
        col.text = rgba(000000FF)
        bar_padding = 14
        bar_text_size = 14
        bar_text_font = UbuntuMono Nerd Font
        bar_text_align = left
        bar_part_of_window = true
        bar_precedence_over_border = true
        hyprbars-button = rgba(ff404000), 0
        hyprbars-button = rgba(eeee1100), 0
    }
}

# Hyprbars window rules
windowrulev2 = plugin:hyprbars:bar_color rgba(FDBDFFFF),focus:1
windowrulev2 = plugin:hyprbars:bar_color rgba(9D6D9FDD),focus:0
windowrulev2 = plugin:hyprbars:title_color rgba(000000FF),focus:1
windowrulev2 = plugin:hyprbars:title_color rgba(111111FF),focus:0

# General appearance
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 3
    col.active_border = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.inactive_border = rgba(565f89cc) rgba(9aa5cecc) 45deg
    layout = master
    resize_on_border = true
}

# Group window settings
group {
    col.border_active = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.border_inactive = rgba(565f89cc) rgba(9aa5cecc) 45deg
    col.border_locked_active = rgba(bb9af7ff) rgba(b4f9f8ff) 45deg
    col.border_locked_inactive = rgba(565f89cc) rgba(9aa5cecc) 45deg
}

# Decoration settings
decoration {
    blur {
        enabled = true
        size = 8
        passes = 3
        new_optimizations = true
    }
}

# Layer rules
layerrule = animation slide, swaync-notification-window
layerrule = ignorealpha 0, swaync-notification-window
layerrule = blur, swaync-notification-window
layerrule = ignorealpha 0, swaync-control-center
layerrule = animation slide right, swaync-control-center
layerrule = blur, swaync-control-center
layerrule = animation popin, rofi
layerrule = ignorealpha 0, rofi
layerrule = dimaround, rofi
layerrule = blur, rofi
layerrule = animation slide down, waybar
layerrule = blur, waybar
layerrule = noanim, selection

# Animation settings
animations {
    enabled = yes, please :)

    # Bezier curves for animation
    bezier = linear, 0, 0, 1, 1
    bezier = easeInCustom, 0.6, 0, 0.7, 0
    bezier = easeOutCustom, 0.3, 1, 0.4, 1
    bezier = easeOutBackCustom, 0.1, 1.2, 0.6, 1
    bezier = bounce, 0.80, 1.40, 0, 0.88

    # Animation configurations
    animation = global, 1, 4, easeOutCustom
    
    animation = windows, 1, 5, easeOutBackCustom
    animation = windowsIn, 1, 5, easeOutBackCustom, popin 40%
    animation = windowsOut, 1, 5, easeOutCustom
    
    animation = layersIn, 1, 3, easeOutCustom, fade
    animation = layersOut, 1, 2, easeInCustom, fade
    animation = fadeLayersIn, 1, 3.5, easeOutCustom
    animation = fadeLayersOut, 1, 3.5, easeOutCustom
    
    animation = border, 1, 4, easeOutCustom
    animation = fade, 1, 3, easeOutCustom
    animation = fadeIn, 1, 3, easeOutCustom
    animation = fadeOut, 1, 3, easeOutCustom
    
    animation = workspaces, 1, 5, easeOutCustom, slidefade 50%
    animation = specialWorkspace, 1, 5, easeOutCustom, slidevert
    animation = specialWorkspaceOut, 1, 2.5, easeInCustom, slidevert
}

# Layout configurations
dwindle {
    pseudotile = true
    preserve_split = true
    split_bias = 2
}

master {
    new_status = slave
    mfact = 0.5
}

# Miscellaneous settings
misc {
    animate_manual_resizes = true
    disable_hyprland_logo = true
    disable_hyprland_qtutils_check = true
    disable_splash_rendering = true
    focus_on_activate = false
    vfr = 1
    vrr = 1
    font_family = UbuntuMono Nerd Font
}

#############
### INPUT ###
#############

input {
    kb_layout = gb
    follow_mouse = 1
    sensitivity = 5
    force_no_accel = 1
}

cursor {
    no_hardware_cursors = true
    inactive_timeout = 2
}

render {
    explicit_sync = true
    explicit_sync_kms = false
    direct_scanout = 0
}

gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
}

# Per-device configuration
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

####################
### KEYBINDINGS ###
####################

# Key modifier variable (changed from SUPER to ALT to match Niri)
$mainMod = ALT
$scriptsDir = $HOME/.config/hypr/scripts

# Window Management
bind = $mainMod, W, fullscreen, 1           # Maximize column
bind = $mainMod, F, fullscreen, 0           # Fullscreen window
bind = $mainMod, Q, killactive              # Kill window

# Applications
bind = $mainMod, Return, exec, ghostty      # Terminal
bind = $mainMod, B, exec, floorp            # Browser
bind = $mainMod, D, exec, fuzzel            # App launcher
bind = $mainMod, S, exec, steam             # Steam
bind = $mainMod, T, exec, dolphin           # File manager
bind = $mainMod, E, exec, emacs             # Emacs
bind = $mainMod, C, exec, emacs ~/.config/hypr/hyprland.conf # Config edit
bind = $mainMod, Y, exec, waypaper          # Wallpaper
bind = $mainMod, A, exec, waypaper          # Alternative wallpaper shortcut
bind = SUPER SHIFT, X, exec, swaylock       # Screen lock
bind = $mainMod SHIFT, P, exec, $scriptsDir/Wlogout.sh # Power menu
bind = $mainMod CTRL, P, exec, reboot       # Reboot
bind = $mainMod, Z, exec, pypr magnify toggle # Magnify

# Window Focus Movement (Vim-style)
bind = $mainMod, J, movefocus, l            # left
bind = $mainMod, L, movefocus, r            # right
bind = $mainMod, I, movefocus, u            # up
bind = $mainMod, K, movefocus, d            # down

# Window Position Movement
bind = $mainMod SHIFT, J, movewindow, l     # left
bind = $mainMod SHIFT, L, movewindow, r     # right
bind = $mainMod SHIFT, I, movewindow, u     # up
bind = $mainMod SHIFT, K, movewindow, d     # down

# Window Resizing
bind = $mainMod, MINUS, resizeactive, -10% 0
bind = $mainMod, EQUAL, resizeactive, 10% 0
bind = $mainMod SHIFT, MINUS, resizeactive, 0 -10%
bind = $mainMod SHIFT, EQUAL, resizeactive, 0 10%

# Window States
bind = $mainMod, V, togglefloating          # Toggle floating
bind = $mainMod, Tab, cyclenext             # Alt+Tab behavior

# Screenshot Bindings
bind = $mainMod, X, exec, grimblast copy area       # Screenshot area
bind = $mainMod SHIFT, X, exec, grimblast save screen # Screenshot screen
bind = $mainMod CTRL, X, exec, grimblast save active # Screenshot window

# Workspace Switching
bind = $mainMod, code:10, workspace, 1      # Workspace 1
bind = $mainMod, code:11, workspace, 2      # Workspace 2
bind = $mainMod, code:12, workspace, 3      # Workspace 3
bind = $mainMod, code:13, workspace, 4      # Workspace 4
bind = $mainMod, code:14, workspace, 5      # Workspace 5
bind = $mainMod, code:15, workspace, 6      # Workspace 6
bind = $mainMod, code:16, workspace, 7      # Workspace 7
bind = $mainMod, code:17, workspace, 8      # Workspace 8
bind = $mainMod, code:18, workspace, 9      # Workspace 9

# Move Window to Workspace
bind = $mainMod SHIFT, code:10, movetoworkspace, 1  # Move to workspace 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2  # Move to workspace 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3  # Move to workspace 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4  # Move to workspace 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5  # Move to workspace 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6  # Move to workspace 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7  # Move to workspace 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8  # Move to workspace 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9  # Move to workspace 9

# Workspace Navigation
bind = $mainMod, M, workspace, e+1          # Next workspace
bind = $mainMod, N, workspace, e-1          # Previous workspace
bind = $mainMod SHIFT, M, movetoworkspace, +1 # Move to next workspace
bind = $mainMod SHIFT, N, movetoworkspace, -1 # Move to previous workspace

# Additional Navigation
bind = $mainMod, bracketleft, movetoworkspace, -1  # Move to previous workspace
bind = $mainMod, bracketright, movetoworkspace, +1 # Move to next workspace
bind = $mainMod, comma, togglegroup          # Toggle window grouping
bind = $mainMod, period, changegroupactive   # Navigate grouped windows

# Power Controls
bind = $mainMod, P, exec, hyprctl dispatch dpms off # Turn off monitors

# Media Controls
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Mouse Bindings
bindm = $mainMod, mouse:272, movewindow     # Move windows with ALT + left click
bindm = $mainMod, mouse:273, resizewindow   # Resize with ALT + right click
bind = $mainMod, mouse_down, workspace, e+1 # Mouse wheel workspace next
bind = $mainMod, mouse_up, workspace, e-1   # Mouse wheel workspace previous

# System Actions
bind = $mainMod SHIFT, Backspace, exit      # Quit Hyprland

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Smart gaps for specific workspaces
workspace = w[tv1], gapsout:2.5, gapsin:2.5
workspace = f[1], gapsout:2.5, gapsin:2.5

# Window rules for specific workspaces
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Application-specific window rules: Tiling
windowrulev2 = tile,class:^(vesktop)$
windowrulev2 = tile,class:^(firefox.*|zen)$
windowrulev2 = tile,class:^(.*)([Cc]ord)$
windowrulev2 = tile,class:^(steam)$,title:^(Steam)$
windowrulev2 = tile,class:^(Spotify|spotify)$
windowrulev2 = tile,class:^(obs|com.obsproject.Studio)$
windowrulev2 = float,class:^(com\.mitchellh\.ghostty)$

# Steam-specific rules
windowrulev2 = size 500 700,class:^(steam)$,title:^(Friends List)$
windowrulev2 = center 1,class:^(steam)$,title:^(Friends List)$
windowrulev2 = float,class:^(steam)$,title:^(.*)$
windowrulev2 = center 1, class:^()$,title:^(Steam)$
windowrulev2 = tile,class:^(steam)$,title:^(Steam)$

# Application-specific window rules: Floating
windowrulev2 = float,class:^(pcmanfm)$
windowrulev2 = float,class:^(eog)$
windowrulev2 = float,class:^(Bitwarden)$
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(love)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Library)$
windowrulev2 = float,class:^(firefox.*|zen|floorp)$,title:^(Invalid Save Permissions)$
windowrulev2 = float,class:^(com\.mitchellh\.ghostty)$,title:^(btop++)$
windowrulev2 = tile,class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float,class:^(org.twosheds.iwgtk|iwgtk)$,title:^(.*)$

# Dialog window rules
windowrulev2 = float,title:^(Open)$
windowrulev2 = float,title:^(Open File)$
windowrulev2 = float,title:^(Open Files)$
windowrulev2 = float,title:^(Choose Files)$
windowrulev2 = float,title:^(Save As)$
windowrulev2 = float,title:^(Confirm to replace files)$
windowrulev2 = float,title:^(File Operation Progress)$
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$

# Performance rules
windowrulev2 = immediate 1,fullscreen,class:^(.*)$
windowrulev2 = immediate 1,class:^(gamescope)$